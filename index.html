<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Juan Marina Varela | Portfolio</title>

  <!-- Fuente tipo programación -->
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="estilos.css" />

  <style>
    /* Cursor parpadeante tipo terminal */
    #typing-text::after {
      content: "|";
      color: #0ff;
      animation: blink 0.8s infinite;
    }

    @keyframes blink {
      0%, 50% { opacity: 1; }
      51%, 100% { opacity: 0; }
    }

    /* Contenedor de texto limitado */
    #typing-text {
      display: inline-block;
      white-space: nowrap;
      overflow: hidden;
      border-right: 2px solid transparent;
      font-family: "Fira Code", monospace;
      font-size: 1.2rem;
      color: #cce7ff;
      text-shadow: 0 0 10px rgba(0,255,255,0.6);
    }
  </style>
</head>
<body>

  <!-- =============================
       NAVBAR
  ============================= -->
  <nav class="navbar">
    <div class="logo">Juan Marina</div>
    <ul class="nav-links">
      <li><a href="index.html" class="active">Inicio</a></li>
      <li><a href="aboutme.html">Sobre mí</a></li>
      <li><a href="habilidades.html">Habilidades</a></li>
      <li><a href="proyectos.html">Proyectos</a></li>
      <li><a href="experiencia.html">Experiencia</a></li>
      <li><a href="contacto1.html">Contacto</a></li>
    </ul>
  </nav>

  <!-- =============================
       HERO SECTION
  ============================= -->
  <section class="hero">
    <video autoplay muted loop class="hero-video">
      <source src="src/Welcome_present.mp4" type="video/mp4" />
    </video>

    <div class="intro">
      <h1 class="hero-title">
        <span class="hey">Hey there!</span><br />
        I'm <span class="name">Juan Marina Varela</span>
      </h1>

      <!-- Efecto terminal -->
      <p id="typing-text" class="typing"></p>

      <a href="aboutme.html" class="btn-game">Entrar</a>
    </div>
  </section>

  <footer>
    <p>© 2025 Juan Marina Varela. All rights reserved.</p>
  </footer>

  <!-- =============================
       SCRIPT: efecto typing dinámico con sonido sincronizado
  ============================= -->
  <script>
    const lines = [
      "Bienvenidos a mi portfolio web.",
      "Desarrollador Frontend, creativo y amante del código limpio.",
      "Estudiante de Desarrollo de Aplicaciones Web en EIG Education, Granada."
    ];

    const typingText = document.getElementById("typing-text");
    const keySound = new Audio("src/77.mp3");
    keySound.volume = 0.4;

    let lineIndex = 0;
    let charIndex = 0;
    let deleting = false;
    let typingStarted = false;
    let audioEnabled = false;

    function playKey() {
      if (audioEnabled) {
        keySound.currentTime = 0;
        keySound.play().catch(() => {});
      }
    }

    function typeEffect() {
      const currentLine = lines[lineIndex];
      const displayedText = typingText.textContent;

      if (!deleting && charIndex < currentLine.length) {
        typingText.textContent = currentLine.substring(0, charIndex + 1);
        charIndex++;
        playKey();
        setTimeout(typeEffect, 80);
      } else if (!deleting && charIndex === currentLine.length) {
        // Pausa antes de borrar
        keySound.pause();
        setTimeout(() => {
          deleting = true;
          typeEffect();
        }, 2000);
      } else if (deleting && charIndex > 0) {
        typingText.textContent = currentLine.substring(0, charIndex - 1);
        charIndex--;
        playKey();
        setTimeout(typeEffect, 40);
      } else if (deleting && charIndex === 0) {
        deleting = false;
        lineIndex = (lineIndex + 1) % lines.length;
        setTimeout(typeEffect, 800);
      }
    }

    function startTyping() {
      if (!typingStarted) {
        typingStarted = true;
        audioEnabled = true;
        typeEffect();
      }
    }

    document.addEventListener("click", startTyping);
    document.addEventListener("mousemove", startTyping);
  </script>
</body>
</html>
